gopm -c gopmconfig --quit-delay 0 &
waitfile bar.txt
exists foo.txt
gopmctl --addr unix:gopm.socket shutdown
wait

-- gopmconfig/config.cue --
package config

config: grpc_server: {
	network: "unix"
	address: "gopm.socket"
}
config: programs: {
	foo: {
		command: """
			sleep 0.5
			echo two started
			echo something else
			echo > foo.txt
			echo one started
			echo hello
			sleep 30
		"""
		probe: and: one: output: "^one started$"
		probe: and: two: output: "^two started$"
		start_seconds: "20s"
	}
	bar: {
		oneshot: true
		command: "echo bar started > bar.txt"
		depends_on: foo: true
	}
}
